# ü§ñ RAG –°–∏—Å—Ç–µ–º–∞ –¥–ª—è –ê–Ω–∞–ª–∏–∑–∞ Python –ö–æ–¥–∞

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥—Ä–∞—Ñ–∞ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ –∏ GPU —É—Å–∫–æ—Ä–µ–Ω–∏—è.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
echo "YANDEX_GPT_API_KEY=your_api_key" > .env
echo "YANDEX_GPT_FOLDER_ID=your_folder_id" >> .env
echo "TEST_PROJ_PATH=/path/to/your/python/project" >> .env
```

### 3. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑)
python rag.py
```

## üíª –°–ø–æ—Å–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ü—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å
./rag "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å PrefixedDBModel?"

# –° –≤—ã–±–æ—Ä–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
./rag "–ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç –º–µ—Ç–æ–¥ render?" --tool=tool_bge_code

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
./rag "–ü–æ–∫–∞–∂–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞" --verbose
```

### 2. Python CLI
```bash
python cli.py "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å PrefixedDBModel?" --tool=tool_llm_encoder
```

### 3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
```bash
python interactive.py
```

### 4. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
python web_ui.py
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000 –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤

### –ê–Ω–∞–ª–∏–∑ –∫–ª–∞—Å—Å–æ–≤ –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å PrefixedDBModel?"
- "–ö–∞–∫–∏–µ –∫–ª–∞—Å—Å—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç BaseModel?"
- "–ü–æ–∫–∞–∂–∏ –∏–µ—Ä–∞—Ä—Ö–∏—é –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è User"

### –ê–Ω–∞–ª–∏–∑ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π
- "–ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç –º–µ—Ç–æ–¥ render?"
- "–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è calculate_total?"
- "–ü–æ–∫–∞–∂–∏ –≥—Ä–∞—Ñ –≤—ã–∑–æ–≤–æ–≤ –¥–ª—è process_data"

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- "–ü–æ–∫–∞–∂–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞"
- "–ö–∞–∫–∏–µ –µ—Å—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã?"
- "–ù–∞–π–¥–∏ –≤—Å–µ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### tool_llm_encoder
- **–õ—É—á—à–µ –¥–ª—è**: –∞–Ω–∞–ª–∏–∑–∞ –∫–ª–∞—Å—Å–æ–≤, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–ú–æ–¥–µ–ª—å**: BAAI/llm-embedder
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –∫–ª–∞—Å—Å–∞—Ö

### tool_bge_code  
- **–õ—É—á—à–µ –¥–ª—è**: –∞–Ω–∞–ª–∏–∑–∞ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ú–æ–¥–µ–ª—å**: BAAI/bge-code-v1
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ —Ñ—É–Ω–∫—Ü–∏—è—Ö

## üî• –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- –ì—Ä–∞—Ñ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π (–∫—Ç–æ-–∫–æ–≥–æ-–≤—ã–∑—ã–≤–∞–µ—Ç)
- –ì—Ä–∞—Ñ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ (–∫—Ç–æ-–æ—Ç-–∫–æ–≥–æ-–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è)
- AST –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É

### ‚úÖ GPU –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ GPU
- 5x —É—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ CUDA
- Graceful fallback –Ω–∞ CPU

### ‚úÖ –£–¥–æ–±–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- Python API

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
rag.py              # –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ RAG
‚îú‚îÄ‚îÄ AST –∞–Ω–∞–ª–∏–∑      # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–¥–∞
‚îú‚îÄ‚îÄ –ì—Ä–∞—Ñ –≤—ã–∑–æ–≤–æ–≤    # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤—è–∑–µ–π —Ñ—É–Ω–∫—Ü–∏–π
‚îú‚îÄ‚îÄ –ì—Ä–∞—Ñ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤—è–∑–µ–π –∫–ª–∞—Å—Å–æ–≤
‚îú‚îÄ‚îÄ –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ  # FAISS + BM25
‚îî‚îÄ‚îÄ LLM –∞–Ω–∞–ª–∏–∑      # YandexGPT

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
‚îú‚îÄ‚îÄ cli.py          # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ interactive.py  # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ web_ui.py       # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ rag (bash)      # –£–¥–æ–±–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞
```

## üîß GPU –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ GPU –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install faiss-gpu torch>=2.0.0 accelerate

# –ü—Ä–æ–≤–µ—Ä–∫–∞ GPU
python test_gpu.py
```

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [GPU_SETUP.md](GPU_SETUP.md)

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | CPU | GPU | –£—Å–∫–æ—Ä–µ–Ω–∏–µ |
|-----------|-----|-----|-----------|
| –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ | ~5 —Å–µ–∫ | ~1 —Å–µ–∫ | **5x** |
| FAISS –ø–æ–∏—Å–∫ | ~100ms | ~20ms | **5x** |
| –û–±—â–µ–µ –≤—Ä–µ–º—è | ~30 —Å–µ–∫ | ~6 —Å–µ–∫ | **5x** |

## ü§ù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- **–ö–æ–¥-—Ä–µ–≤—å—é** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** - –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏  
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–û–Ω–±–æ—Ä–¥–∏–Ω–≥** - –±—ã—Å—Ç—Ä–æ–µ –∏–∑—É—á–µ–Ω–∏–µ legacy –ø—Ä–æ–µ–∫—Ç–æ–≤

---

üéâ **–ì–æ—Ç–æ–≤–æ!** –í–∞—à–∞ RAG —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É Python –∫–æ–¥–∞!